$(document).ready(function() {
  function calculateTotal(row) {
    var quantity = parseInt(row.find('.quantity').val()) || 0;
    var unitPrice = parseFloat(row.find('.unit-price').val()) || 0;
    var total = quantity * unitPrice;
    row.find('.total').text('R$ ' + total.toFixed(2));
    return total;
  }

   function updateTotalSum() {
      var sum = 0;
      $('tbody tr').each(function() {
        var total = calculateTotal($(this));
        sum += total;
      });

      var desconto = parseFloat($('#desconto').val()) || 0;
      var valorTotalPedido = sum - desconto;

      var formattedSum = sum.toFixed(2);
      var formattedValorTotalPedido = valorTotalPedido.toFixed(2);

      $('#total-sum').text('Valor Total: R$ ' + formattedSum);
      $('#order-total').text('Valor Total do Pedido: R$ ' + formattedValorTotalPedido);
    }

  $(document).on('input', '.quantity, .unit-price', function() {
    var row = $(this).closest('tr');
    calculateTotal(row);
    updateTotalSum();
  });



  // Inicializar o valor total ao carregar a p√°gina
  updateTotalSum();
});

